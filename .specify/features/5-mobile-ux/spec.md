# 기능 명세서: 모바일 메뉴 & UX 개선

**작성일**: 2025-11-15
**상태**: 초안
**우선순위**: 높음 (출시 주간)
**관련 헌장 원칙**: 원칙 5 (사용자 경험 우선)

## 개요

### 목적
모바일 사용자에게 일급 사용자 경험을 제공하여 이탈률을 낮추고 참여도를 높입니다. 모바일 트래픽이 전체의 60% 이상을 차지합니다.

### 배경
현재 Header의 카테고리 네비게이션이 `md:flex`로 숨겨져 있지만 모바일 메뉴 버튼이 없어 모바일에서 카테고리 접근이 불가능합니다. 또한 로딩 상태, 에러 처리도 누락되어 있습니다.

### 범위

**포함사항:**
- 햄버거 메뉴 버튼 및 모바일 네비게이션 드로어
- 로딩 상태 표시 (스켈레톤, 스피너)
- 에러 페이지 및 처리
- 모바일 최적화 터치 타겟
- Pull-to-refresh 지원 (선택)

**제외사항:**
- PWA 기능 (오프라인 지원)
- 앱 설치 프롬프트

## 사용자 시나리오

### 시나리오 1: 모바일에서 카테고리 탐색

**사용자**: 스마트폰 사용자
**상황**: 특정 카테고리 콘텐츠 찾기

1. 모바일에서 홈페이지 접속
2. Header 우측에 햄버거 메뉴 아이콘(☰) 보임
3. 햄버거 아이콘 터치
4. 우측에서 드로어 슬라이드 애니메이션으로 열림
5. 드로어 내용:
   - 6개 카테고리 목록 (큰 터치 타겟)
   - 로그인/회원가입 버튼 (미인증 시)
   - 프로필/로그아웃 (인증 시)
   - 구독 CTA
6. 카테고리 선택 → 해당 페이지로 이동, 드로어 자동 닫힘

### 시나리오 2: 페이지 로딩 중

**사용자**: 느린 네트워크 환경 사용자
**상황**: 블로그 글 로딩

1. 블로그 글 링크 클릭
2. 즉시 로딩 스켈레톤 표시:
   - 커버 이미지 placeholder (회색 박스)
   - 제목 shimmer 애니메이션
   - 본문 라인 placeholder
3. 데이터 로드 완료 → 실제 콘텐츠로 교체 (부드러운 전환)

### 시나리오 3: 에러 발생

**사용자**: 네트워크 오류 경험 사용자
**상황**: 게시글 로드 실패

1. 블로그 글 페이지 접근
2. Sanity API 타임아웃
3. 에러 화면 표시:
   - 친절한 메시지: "콘텐츠를 불러올 수 없습니다"
   - 아이콘 (🔌 또는 ⚠️)
   - "다시 시도" 버튼
   - "홈으로 돌아가기" 링크
4. "다시 시도" 클릭 → 페이지 새로고침

## 기능 요구사항

### FR1: 모바일 햄버거 메뉴
- **위치**: Header 우측, 데스크톱에서는 숨김 (`md:hidden`)
- **아이콘**: ☰ (3줄) 또는 Heroicon의 `Bars3Icon`
- **동작**: 클릭 시 우측에서 드로어 슬라이드 인
- **배경 오버레이**: 어두운 반투명 (`bg-black/50`), 클릭 시 드로어 닫힘

### FR2: 모바일 네비게이션 드로어
- **너비**: 화면의 80% (최대 320px)
- **내용**:
  - 로고 및 닫기 버튼 (×)
  - 6개 카테고리 링크 (각 48px 높이, 터치 친화적)
  - 로그인/회원가입 또는 프로필/로그아웃
  - 구독 CTA 버튼
- **애니메이션**: `transform translate-x` 사용, 300ms ease-in-out
- **닫기 동작**:
  - 드로어 밖 클릭 시 자동 닫힘
  - 배경 오버레이 클릭 시 닫힘
  - 드로어 외부 스크롤은 오버레이가 차단 (드로어 내부만 스크롤 가능)

### FR3: 로딩 스켈레톤
블로그 글 페이지에 적용:
- **커버 이미지**: `animate-pulse bg-gray-200` 박스
- **제목**: 2줄의 shimmer 라인
- **본문**: 6줄의 shimmer 라인
- **메타 정보**: 작은 shimmer 라인

홈페이지/카테고리 페이지에 적용:
- **PostCard 스켈레톤 개수** (반응형):
  - 모바일 (< 768px): 3개
  - 태블릿 (768px-1024px): 4개
  - 데스크톱 (≥ 1024px): 6개
- **구현**: Tailwind 반응형 클래스로 조건부 렌더링

### FR4: 에러 페이지
`error.tsx` 파일 생성:
- **제목**: "앗, 문제가 발생했습니다"
- **설명**: 기술적 오류 내용 (개발 모드만)
- **버튼**: "다시 시도", "홈으로"
- **디자인**: 심플, Medium 스타일

`not-found.tsx` 파일 생성:
- **제목**: "페이지를 찾을 수 없습니다"
- **설명**: "요청하신 페이지가 존재하지 않거나 이동했습니다"
- **추천 링크**: 인기 게시글 3개 또는 카테고리 목록

### FR5: 로딩 인디케이터
- **API 호출 시**: 작은 스피너 표시 (뉴스레터 구독, 로그인 버튼 등)
- **페이지 전환**: Next.js `<Progress />` 바 (optional, 상단)

### FR6: 터치 타겟 최적화
- 모든 클릭 가능한 요소는 최소 44x44px (Apple HIG 권장)
- 링크 간 간격 최소 8px
- 버튼 패딩 충분 (`px-6 py-3`)

### FR7: 모바일 폼 개선
- 입력 필드 `font-size: 16px` 이상 (iOS 자동 줌 방지)
- 키보드 타입 적절히 설정 (`type="email"`, `inputMode="numeric"`)
- 폼 제출 시 로딩 스피너 및 버튼 비활성화

## 성공 기준

### 정량적 지표
1. 모바일 이탈률 40% 이하 (현재 추정 60%)
2. 평균 세션 시간 3분 이상 (모바일)
3. 에러 페이지 "다시 시도" 클릭률 50% 이상

### 정성적 지표
1. 모바일 사용자가 카테고리 탐색 가능
2. 로딩 중에도 화면이 "살아있음" (스켈레톤)
3. 에러 발생 시 사용자가 당황하지 않음 (친절한 메시지)

## 테스트 시나리오

### 수용 테스트 1: 모바일 메뉴 열기/닫기
1. 모바일 화면 크기로 조정 (< 768px)
2. 햄버거 아이콘 클릭
3. **기대 결과**: 드로어 우측에서 슬라이드 인
4. 오버레이 클릭
5. **기대 결과**: 드로어 닫힘

### 수용 테스트 2: 로딩 스켈레톤
1. 네트워크 스로틀링 (Slow 3G)
2. 블로그 글 페이지 접속
3. **기대 결과**: 즉시 스켈레톤 표시, 데이터 로드 후 교체

### 수용 테스트 3: 404 페이지
1. 존재하지 않는 URL 접속 (`/nonexistent`)
2. **기대 결과**: "페이지를 찾을 수 없습니다" 화면

### 수용 테스트 4: 터치 타겟 크기
1. 모바일에서 카테고리 링크 터치
2. **기대 결과**: 쉽게 터치 가능 (오터치 없음)

## 엣지 케이스

### EC1: 드로어 열린 상태에서 화면 회전
- **처리**: 자동 닫힘 (landscape/portrait 양방향 모두)
- **이유**: 회전 시 레이아웃 재계산 필요, 일관성 유지

### EC2: 빠른 페이지 전환
- **처리**: 이전 로딩 스켈레톤 즉시 제거, 새 스켈레톤 표시

### EC3: 오프라인 상태
- **처리**: 에러 페이지 표시, "인터넷 연결을 확인해주세요" 메시지

## 가정사항
1. 모바일 사용자의 80%는 Chrome 또는 Safari 사용
2. 평균 모바일 화면 너비: 375px-428px
3. 터치 기기 사용 (마우스 호버 불가)

## 관련 문서
- [CryptoTitan 헌장 - 원칙 5](../../memory/constitution.md#원칙-5-사용자-경험-우선)
- [Apple Human Interface Guidelines - Touch Targets](https://developer.apple.com/design/human-interface-guidelines/inputs/touchscreen-gestures/)

---

**다음 단계**: `/speckit.plan`으로 모바일 UX 개선 작업 세부 계획
